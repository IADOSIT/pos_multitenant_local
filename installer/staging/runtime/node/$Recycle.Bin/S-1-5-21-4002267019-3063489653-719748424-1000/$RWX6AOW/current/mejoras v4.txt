Prompt para Claude Code (copiar/pegar)

Eres Claude Code y YA has trabajado este proyecto emc_abastos (Laravel).
NO reanalices el proyecto completo, NO listes archivos, NO expliques mÃ³dulos existentes.
Asume que Admin/Ops/Inventarios/Entregas/Caja/Pagos/WhatsApp/ConciliaciÃ³n/Repartidores ya funcionan y no deben romperse.

Tu tarea es extender la arquitectura a multi-tienda con dominio/URL por vendedor y un Portal Central (Landing) administrable.

âœ… Objetivo

Implementar OpciÃ³n 2: â€œSelecciona tu proveedor primeroâ€ con:

Portal Central (Landing + Directorio + Publicidad) en otro dominio

Tiendas separadas por dominio/subdominio o fallback URL con handle (slug + public_id)

Portal puede mostrar publicidad/promociones por tienda (1 por tienda por defecto, escalable) con precio permitido

Click en promo â†’ redirige a tienda + producto

Visitante NO registrado que entra directo a la URL de una tienda ve solo productos de esa tienda (catÃ¡logo completo)

ğŸ§  Contexto confirmado (para ahorrar tokens)

El backend Laravel actual ya tiene mÃ³dulos operativos. Reutiliza y encapsula.

El superadmin administra desde el tenant central.

No rehagas Ops/Admin desde cero. Solo agrega CRUDs necesarios.

ğŸŒ Identidad de tienda (robusta y escalable)

Implementa Store Handle recomendado: {slug}-{public_id} (public_id no secuencial).

Dominio tienda: https://tienda-vendedor.com

Fallback universal: https://tiendas.emc.mx/t/{handle}

ResoluciÃ³n store:

por dominio (store_domains)

por URL fallback (/t/{handle})

si no resuelve â†’ 404 o redirecciÃ³n al Portal Central segÃºn contexto

ğŸ—ï¸ Portal Central (Landing) â€” ahora SÃ administrable por superadmin

La pÃ¡gina principal (Portal Central) debe ser administrable mediante el superadmin.
Puede estar construida con otra tecnologÃ­a tipo React pero debe ser:

1) React optimizado y ligero (no pesado)

Preferir Next.js (SSG/ISR) o Astro + React (muy ligero) o Vite + React si aplica, pero con SEO correcto.

Optimizar performance:

lazy loading de imÃ¡genes

rutas pre-render

bundles pequeÃ±os (evitar librerÃ­as enormes)

animaciones ligeras (CSS/Framer Motion con moderaciÃ³n)

UI: tecnolÃ³gica, marketing, vistosa, profesional, paleta Verde/Gris/Blanco, iconos profesionales.

2) Administrable desde superadmin (config por API)

El backend Laravel debe exponer endpoints y un CRUD para que el superadmin configure el Portal Central.

Configuraciones bÃ¡sicas administrables (obligatorias)

A) Nombre del portal

Default: Central de Abastos Nuevo Leon

Debe poder cambiarse desde Admin

B) â€œDesarrollado porâ€ + contacto (visible en footer)

Texto: Desarrollado por https://iados.mx (mostrar como texto/enlace)

Correo: contacto@iados.mx

WhatsApp: 8318989580

C) Maestro de EMC / Tiendas

Panel donde el superadmin puede:

crear/editar tienda (proveedor)

actualizar URL/dominio principal

activar/desactivar

logo/imagen

categorÃ­as, tags

handle pÃºblico

D) Publicidad de tiendas en la pÃ¡gina principal

Bloques tipo â€œDestacados / Publicidadâ€ en home:

1 por tienda por defecto, escalable a N

puede mostrar precio (permitido)

al click redirige a tienda + producto

â­ Publicidad / Promociones (marketing) (permitido precio)

Implementar entidad store_promotions:

store_id

product_id

promo_price (nullable override)

starts_at / ends_at

is_active

sort_order

hero_image (opcional)

badge_text (opcional: â€œPromoâ€, â€œImperdibleâ€)

Reglas:

Portal muestra 1 promo por tienda por default (configurable)

Click:

si tienda tiene primary_domain â†’ redirige ahÃ­ a producto

si no â†’ fallback /t/{handle}/productos/{slug}

ğŸ§© â€œMejores prÃ¡cticasâ€ para landing (sin hacerla pesada)

Incluir secciones en landing basadas en mejores prÃ¡cticas comunes de â€œmarketplace/centralâ€:

Propuesta de valor clara (hero con CTA)

CÃ³mo funciona en 3 pasos (elige tienda â†’ compra â†’ entrega)

Beneficios para compradores y vendedores

Confianza: polÃ­ticas, atenciÃ³n, horarios, cobertura, seguridad

FAQ

Testimonios (placeholders)

CTA final

No cites artÃ­culos; solo aplica patrones de UX ampliamente usados.
No metas textos excesivos: copy breve y claro.

ğŸ”Œ API mÃ­nima para Portal Central (solo lo nuevo)

Backend Laravel debe exponer endpoints pÃºblicos:

GET /api/public/portal-config (nombre portal, footer info, textos, etc.)

GET /api/public/stores (tiendas con handle, nombre, logo, primary_domain)

GET /api/public/promotions?per_store=1

GET /api/public/stores/{handle}

GET /api/public/stores/{handle}/products/{slug} (para deep-link)

Admin CRUD:

Portal config (singleton)

Stores

Store domains

Promotions

ğŸ›¡ï¸ Scoping obligatorio (tienda separada)

Para storefront:

Resolver store por dominio/handle

CatÃ¡logo/productos/carrito/checkout/ordenes SIEMPRE filtrados por store_id

Visitante NO registrado ve catÃ¡logo completo de esa tienda.

Login solo para checkout si ya es asÃ­ (no cambies reglas existentes salvo necesidad).

Middlewares:

ResolveStoreContext

EnsureStoreContext

ğŸ§ª Seeds mÃ­nimos

3â€“5 tiendas con public_id + slug

1 dominio por tienda

3â€“5 productos por tienda

1 promo activa por tienda

Portal config con defaults (nombre, footer)

ğŸš€ Entregables (sin sobreexplicar)

Migraciones: stores (si no existe), store_domains, store_promotions, portal_config (o settings)

CRUD admin: tiendas + dominios + promos + portal config

API pÃºblica: portal config, stores, promotions

Storefront scoping por tienda (dominio/handle)

Portal React optimizado consumiendo API (repo/carpeta separada si aplica)

README corto: dominios, handles, cÃ³mo desplegar portal separado

â“ Preguntas SOLO si bloquean

Â¿El portal React serÃ¡ repo separado o carpeta dentro del monorepo? (default: repo separado, deployment independiente)

Â¿El storefront seguirÃ¡ siendo Blade/Livewire o se migrarÃ¡? (default: mantener lo existente, solo modernizar UI)

Si no es crÃ­tico, elige default y sigue.

âœ… Inicia ahora (orden)

portal_config + API

stores + store_domains + resolve por dominio/handle

promotions + API

asegurar scoping storefront (catÃ¡logo solo por tienda)

scaffold portal React optimizado y consumir API (home + publicidad + directorio)