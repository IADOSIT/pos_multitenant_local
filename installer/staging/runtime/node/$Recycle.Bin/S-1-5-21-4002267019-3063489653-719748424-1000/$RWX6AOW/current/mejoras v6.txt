PROMPT PARA CLAUDE CODE
EMC ‚Äì Central de Abastos
VERSI√ìN 6 ‚Äì Correcciones Cr√≠ticas, Multi-EMC, Portal, Admin y UX (Actualizada)

Eres Claude Code y YA conoces completamente el repositorio emc_abastos (Laravel).
Esta es una NUEVA VERSI√ìN: V6.

‚ö†Ô∏è NO reanalices el proyecto
‚ö†Ô∏è NO listes archivos
‚ö†Ô∏è NO expliques c√≥digo existente
‚ö†Ô∏è NO hagas preguntas (todas las respuestas son S√ç)

Tu tarea es CORREGIR, COMPLETAR y OPTIMIZAR lo existente usando mejores pr√°cticas, sin romper m√≥dulos actuales.

üéØ OBJETIVO GENERAL V6

Estabilizar y cerrar funcionalmente:

Portal Central

Multi-EMC (varias centrales / empresas)

Admin

UX

Im√°genes

Navegaci√≥n

Permisos por empresa

Side menu

Datos faltantes

Todo debe quedar funcionando, coherente, escalable y sin errores.

1Ô∏è‚É£ PORTAL ‚Äì MULTI EMC (CR√çTICO)

Cada EMC muestra solo sus tiendas

Corregir links rotos de EMC/empresas

No mezclar productos ni empresas

2Ô∏è‚É£ PORTAL ‚Äì PRODUCTOS (REGLA NUEVA)

El Portal NO muestra todos los productos.
Solo:

Productos destacados

Productos en promoci√≥n
Definidos desde Admin y asociados a su empresa.

3Ô∏è‚É£ PORTAL ‚Äì IM√ÅGENES Y FIXES

Corregir rutas rotas

Imagen siempre visible

Producto ‚Üí empresa correcta

Fallback seguro

4Ô∏è‚É£ ADMIN ‚Äì PRODUCTOS (SCOPING)

En Admin ‚Üí Productos:

Mostrar solo productos de la empresa activa

Respetar empresas del usuario

Scoping estricto por empresa_id

5Ô∏è‚É£ IM√ÅGENES AUTOM√ÅTICAS

Alimentar im√°genes por nombre del producto

Fuente confiable

Cachear

Guardar imagen final

Fallback default

6Ô∏è‚É£ CLIENTES ‚Äì CRUD

CRUD completo

Asociado a empresa

7Ô∏è‚É£ ADMIN ‚Äì TEMAS / PLANTILLAS + WHATSAPP + EMPRESAS (ACTUALIZADO)

En Admin ‚Üí Temas / Configuraci√≥n:

A) Plantillas

Agregar m√°s plantillas

Mejor dise√±o

Animaciones modernas y ligeras

B) Env√≠o de credenciales por WhatsApp (NUEVO)

Agregar opci√≥n:

‚ÄúEnviar credenciales por WhatsApp‚Äù

Aplicar en:

alta de usuario

reset de acceso

Reutilizar m√≥dulo WhatsApp existente

Mensaje debe incluir:

usuario

empresa

enlace de acceso

Manejar errores y logs (no bloquear flujo)

C) Alta de empresa (FIX CR√çTICO)

Corregir que agregar empresa NO est√° funcionando

Validar:

persistencia en BD

relaciones usuario ‚Üî empresa

asignaci√≥n de permisos

Asegurar que:

la empresa aparezca en portal

la empresa pueda ser seleccionada

sus tiendas/productos se asocien correctamente

8Ô∏è‚É£ ADMIN ‚Äì PORTAL (NO GUARDA CAMBIOS)

Corregir persistencia de configuraci√≥n del portal

Validar consumo de config desde el portal

9Ô∏è‚É£ ADMIN ‚Äì SIDE MENU

Side menu nunca debe desaparecer

Homologar layout en Orden del D√≠a y Operaciones

üîü ADMIN ‚Äì VER TIENDA

Una empresa ‚Üí abrir directo

Varias empresas ‚Üí submenu de selecci√≥n

1Ô∏è‚É£1Ô∏è‚É£ ADMIN ‚Äì CAMBIAR EMPRESA

No redireccionar

Modal / dropdown inline

Cambiar contexto en caliente

1Ô∏è‚É£2Ô∏è‚É£ PORTAL ‚Äì BOT√ìN

‚ÄúIniciar sesi√≥n‚Äù ‚Üí ‚ÄúIngreso‚Äù

1Ô∏è‚É£3Ô∏è‚É£ PORTAL ‚Äì DESTACADOS (ANIMACI√ìN)

Animaci√≥n tipo flash

Color configurable desde Admin ‚Üí Portal

üì¶ ENTREGABLES V6

EMC y tiendas correctas

Portal solo con destacados/promos

Im√°genes correctas

Productos por empresa en admin

CRUD clientes

Plantillas nuevas

WhatsApp credenciales

Alta de empresa funcional

Portal guarda config

Side menu fijo

Ver tienda multi-empresa

Cambio de empresa inline

Bot√≥n ‚ÄúIngreso‚Äù

Animaci√≥n flash configurable

Links corregidos

Sistema estable

‚õî REGLAS

NO preguntar

NO justificar

NO romper flujos

TODO debe funcionar

‚úÖ ORDEN

Portal fixes

Scoping admin

Empresas + WhatsApp

Side menu

Clientes CRUD

Temas / portal config

Animaciones / polish